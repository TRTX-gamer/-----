C51 COMPILER V9.60.0.0   MAIN                                                              06/30/2022 17:34:33 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: C:\Program Files\Keil_v5\C51\BIN\C51.EXE Core\Src\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(.\Core\Inc
                    -;.\Drivers\Inc) DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2          09_wiegang读卡LCD1602显示
   3              功能
   4                  通过读卡器读卡，LCD1602显示信息
   5              目的
   6                  练习LCD显示，读卡器的使用
   7          */
   8          #include <main.h>
   9          
  10          ////////////////////////////////////////////////////////////////////////////////
  11          typedef unsigned int u16;
  12          typedef unsigned char u8;
  13          
  14          wiegand_dev wiegand_dev_t; // 定义一个结构体，用于存储韦根卡的数据
  15          
  16          /******************************************************************************
  17           *函数名称：main( )
  18           *函数功能：主函数
  19           *入口函数：无
  20           *出口函数：无
  21           ****************************************************************************/
  22          void main() using 0
  23          {
  24   1          initial();
  25   1          LcdInit();
  26   1          wiegand_dev_t.global_var = 0;
  27   1      
  28   1          while (1)
  29   1          {
  30   2              if (wiegand_dev_t.global_var == 34)
  31   2              {
  32   3                  wiegand_dev_t.global_var = 0;
  33   3                  LcdPrintf(wiegand_dev_t.wiegand);
  34   3              }
  35   2          }
  36   1      }
  37          
  38          /******************************************************************************
  39           *函数名称：Wiegand_Data0( )
  40           *函数功能：韦根卡数据0中断处理
  41           *入口函数：无
  42           *出口函数：无
  43           ******************************************************************************/
  44          void Wiegand_Data0() interrupt 0 using 1 //中断0处理函数,使用第一组寄存器，main函数使用
             -0组寄存器，写好寄存器组可以省去寄存器入栈，提高速度
  45          {
  46   1          EX0 = 0;
  47   1          wiegand_dev_t.wiegand[wiegand_dev_t.global_var] = '0';
  48   1          wiegand_dev_t.global_var += 1;
  49   1          udelay(100);
  50   1          EX0 = 1;
  51   1      }
  52          
  53          /******************************************************************************
C51 COMPILER V9.60.0.0   MAIN                                                              06/30/2022 17:34:33 PAGE 2   

  54           *函数名称：Wiegand_Data1( )
  55           *函数功能：韦根卡数据1中断处理
  56           *入口函数：无
  57           *出口函数：无
  58           ******************************************************************************/
  59          void Wiegand_Data1() interrupt 2 using 2 //中断1处理函数,使用第二组寄存器
  60          {
  61   1          EX1 = 0;
  62   1          wiegand_dev_t.wiegand[wiegand_dev_t.global_var] = '1';
  63   1          wiegand_dev_t.global_var += 1;
  64   1          udelay(100);
  65   1          EX1 = 1;
  66   1      }
  67          
  68          // 2022年6月26号11点35分


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    127    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     36    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
